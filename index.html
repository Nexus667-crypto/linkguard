<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LinkGuard ‚Äî Suite de S√©curit√©</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}

:root {
  --bg: #07090f;
  --surface: #0d1117;
  --surface2: #121820;
  --border: #1e2a3a;
  --border2: #263040;
  --accent: #00d9ff;
  --accent2: #7c3aed;
  --safe: #00e98a;
  --warn: #ffb800;
  --danger: #ff3e6c;
  --text: #e2eaf8;
  --muted: #4a5a70;
  --muted2: #6a7a90;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Syne', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}

/* ‚îÄ‚îÄ Grid BG ‚îÄ‚îÄ */
body::before {
  content:'';
  position:fixed;inset:0;
  background-image:
    linear-gradient(rgba(0,217,255,0.025) 1px,transparent 1px),
    linear-gradient(90deg,rgba(0,217,255,0.025) 1px,transparent 1px);
  background-size:48px 48px;
  pointer-events:none;z-index:0;
}

/* ‚îÄ‚îÄ NAVBAR ‚îÄ‚îÄ */
.navbar {
  position: sticky; top: 0; z-index: 100;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0.9rem 2rem;
  background: rgba(7,9,15,0.85);
  backdrop-filter: blur(16px);
  border-bottom: 1px solid var(--border);
}

.nav-logo {
  display: flex; align-items: center; gap: 0.6rem;
  font-weight: 800; font-size: 1.2rem;
  background: linear-gradient(135deg,var(--accent),#006aff);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  background-clip:text;
}

.nav-logo-icon {
  width: 32px; height: 32px;
  background: linear-gradient(135deg,var(--accent),#006aff);
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1rem;
  box-shadow: 0 0 16px rgba(0,217,255,0.35);
}

.nav-links {
  display: flex; gap: 0.3rem;
}

.nav-btn {
  background: none; border: none; color: var(--muted2);
  font-family: 'Syne', sans-serif; font-size: 0.82rem; font-weight: 600;
  padding: 0.45rem 0.9rem; border-radius: 8px; cursor: pointer;
  transition: color 0.2s, background 0.2s;
  letter-spacing: 0.03em;
}
.nav-btn:hover, .nav-btn.active { color: var(--text); background: rgba(255,255,255,0.06); }

.nav-premium-btn {
  background: linear-gradient(135deg, #7c3aed, #a855f7);
  color: #fff; border: none;
  font-family: 'Syne', sans-serif; font-size: 0.82rem; font-weight: 700;
  padding: 0.45rem 1.1rem; border-radius: 8px; cursor: pointer;
  transition: opacity 0.2s, transform 0.15s;
  letter-spacing: 0.03em;
  box-shadow: 0 0 16px rgba(124,58,237,0.35);
}
.nav-premium-btn:hover { opacity: 0.9; transform: translateY(-1px); }

/* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
main { position: relative; z-index: 1; }

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
.hero {
  text-align: center;
  padding: 5rem 2rem 3rem;
  animation: fadeDown 0.6s ease both;
}

.hero-badge {
  display: inline-flex; align-items: center; gap: 0.5rem;
  background: rgba(0,217,255,0.08); border: 1px solid rgba(0,217,255,0.2);
  border-radius: 99px; padding: 0.35rem 1rem;
  font-size: 0.75rem; font-weight: 700; letter-spacing: 0.1em;
  color: var(--accent); text-transform: uppercase;
  margin-bottom: 1.5rem;
}

.hero h1 {
  font-size: clamp(2.2rem,5vw,3.8rem);
  font-weight: 800;
  line-height: 1.1;
  margin-bottom: 1rem;
  letter-spacing: -1px;
}

.hero h1 span {
  background: linear-gradient(135deg,var(--accent),#006aff);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  background-clip:text;
}

.hero p {
  color: var(--muted2); font-size: 1.05rem; max-width: 520px; margin: 0 auto 2rem;
  line-height: 1.6;
}

.hero-stats {
  display: flex; justify-content: center; gap: 2.5rem; flex-wrap: wrap;
}

.stat { text-align: center; }
.stat-num { font-size: 1.6rem; font-weight: 800; color: var(--accent); }
.stat-label { font-size: 0.75rem; color: var(--muted); letter-spacing: 0.05em; text-transform: uppercase; }

/* ‚îÄ‚îÄ TOOL TABS ‚îÄ‚îÄ */
.tools-section {
  max-width: 780px; margin: 0 auto; padding: 2rem 1.5rem 4rem;
}

.tool-tabs {
  display: flex; gap: 0.4rem; flex-wrap: wrap;
  margin-bottom: 1.8rem;
  border-bottom: 1px solid var(--border);
  padding-bottom: 1rem;
}

.tab-btn {
  display: flex; align-items: center; gap: 0.5rem;
  background: none; border: 1px solid transparent;
  color: var(--muted2); font-family: 'Syne', sans-serif;
  font-size: 0.82rem; font-weight: 600; padding: 0.5rem 1rem;
  border-radius: 8px; cursor: pointer; transition: all 0.2s;
  position: relative;
}
.tab-btn:hover { color: var(--text); border-color: var(--border2); }
.tab-btn.active {
  color: var(--accent); background: rgba(0,217,255,0.07);
  border-color: rgba(0,217,255,0.25);
}
.tab-btn .tab-icon { font-size: 1rem; }

.tab-badge {
  font-size: 0.6rem; font-weight: 700; letter-spacing: 0.08em;
  background: linear-gradient(135deg,#7c3aed,#a855f7);
  color: #fff; border-radius: 4px; padding: 0.1rem 0.35rem;
  text-transform: uppercase;
}

/* ‚îÄ‚îÄ TOOL PANELS ‚îÄ‚îÄ */
.tool-panel { display: none; animation: fadeUp 0.3s ease both; }
.tool-panel.active { display: block; }

/* ‚îÄ‚îÄ CARD ‚îÄ‚îÄ */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px; padding: 1.8rem;
  margin-bottom: 1rem;
  position: relative; overflow: hidden;
}
.card::before {
  content:''; position:absolute; top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--accent),transparent);
  opacity:0.3;
}

.input-label {
  font-size: 0.75rem; font-weight: 700; letter-spacing: 0.12em;
  text-transform: uppercase; color: var(--muted); margin-bottom: 0.7rem; display: block;
}

.input-row { display: flex; gap: 0.7rem; align-items: stretch; }

.tool-input {
  flex: 1; background: var(--bg); border: 1px solid var(--border);
  border-radius: 10px; padding: 0.85rem 1.1rem;
  color: var(--text); font-family: 'JetBrains Mono', monospace;
  font-size: 0.88rem; outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.tool-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(0,217,255,0.1); }
.tool-input::placeholder { color: var(--muted); }

.action-btn {
  background: linear-gradient(135deg,var(--accent),#006aff);
  color: #000; border: none; border-radius: 10px;
  padding: 0.85rem 1.4rem; font-family: 'Syne', sans-serif;
  font-weight: 700; font-size: 0.88rem; cursor: pointer;
  transition: transform 0.15s, opacity 0.15s; white-space: nowrap;
}
.action-btn:hover { opacity:0.9; transform:translateY(-1px); }
.action-btn:active { transform:translateY(0); }
.action-btn:disabled { opacity:0.4; cursor:not-allowed; transform:none; }

.error-msg {
  display:none; color:var(--danger); font-size:0.8rem;
  margin-top:0.5rem; font-family:'JetBrains Mono',monospace;
}
.error-msg.visible { display:block; }

/* ‚îÄ‚îÄ LOADING ‚îÄ‚îÄ */
.loading { display:none; text-align:center; padding:1.8rem; }
.loading.visible { display:block; animation:fadeUp 0.3s ease; }
.spinner {
  width:36px;height:36px;border:3px solid var(--border);
  border-top-color:var(--accent);border-radius:50%;
  animation:spin 0.8s linear infinite;margin:0 auto 0.8rem;
}
.loading-text { color:var(--muted2);font-size:0.85rem;font-family:'JetBrains Mono',monospace; }

/* ‚îÄ‚îÄ RESULT BASE ‚îÄ‚îÄ */
.result { display:none; }
.result.visible { display:block; animation:fadeUp 0.4s ease both; }

.result-card {
  background:var(--surface); border:1px solid var(--border);
  border-radius:16px; padding:1.6rem; position:relative; overflow:hidden;
}
.result-card.safe   { border-color:rgba(0,233,138,0.4); }
.result-card.warn   { border-color:rgba(255,184,0,0.4);  }
.result-card.danger { border-color:rgba(255,62,108,0.4); }
.result-card.info   { border-color:rgba(0,217,255,0.4);  }

.result-glow { position:absolute;inset:0;pointer-events:none; }
.safe   .result-glow { background:radial-gradient(ellipse at top right,rgba(0,233,138,0.06),transparent 60%); }
.warn   .result-glow { background:radial-gradient(ellipse at top right,rgba(255,184,0,0.06),transparent 60%); }
.danger .result-glow { background:radial-gradient(ellipse at top right,rgba(255,62,108,0.06),transparent 60%); }
.info   .result-glow { background:radial-gradient(ellipse at top right,rgba(0,217,255,0.06),transparent 60%); }

.result-header { display:flex;align-items:center;gap:1rem;margin-bottom:1.2rem; }
.result-icon {
  width:48px;height:48px;border-radius:12px;
  display:flex;align-items:center;justify-content:center;
  font-size:1.5rem;flex-shrink:0;
}
.safe   .result-icon { background:rgba(0,233,138,0.12);border:1px solid rgba(0,233,138,0.25); }
.warn   .result-icon { background:rgba(255,184,0,0.12); border:1px solid rgba(255,184,0,0.25);  }
.danger .result-icon { background:rgba(255,62,108,0.12);border:1px solid rgba(255,62,108,0.25); }
.info   .result-icon { background:rgba(0,217,255,0.12); border:1px solid rgba(0,217,255,0.25);  }

.result-title { font-size:1.25rem;font-weight:800; }
.safe   .result-title { color:var(--safe);   }
.warn   .result-title { color:var(--warn);   }
.danger .result-title { color:var(--danger); }
.info   .result-title { color:var(--accent); }

.result-sub { color:var(--muted2);font-size:0.8rem;font-family:'JetBrains Mono',monospace;word-break:break-all; }

.result-desc { color:#8a9eb8;font-size:0.92rem;line-height:1.6;margin-bottom:1.2rem; }

/* ‚îÄ‚îÄ SCORE BAR ‚îÄ‚îÄ */
.score-bar-wrap { margin:1rem 0; }
.score-bar-label { display:flex;justify-content:space-between;font-size:0.75rem;color:var(--muted);margin-bottom:0.4rem; }
.score-bar-track { height:5px;background:var(--border);border-radius:99px;overflow:hidden; }
.score-bar-fill { height:100%;border-radius:99px;transition:width 1s cubic-bezier(.22,1,.36,1); }

/* ‚îÄ‚îÄ CHECKS GRID ‚îÄ‚îÄ */
.checks { display:grid;grid-template-columns:1fr 1fr;gap:0.5rem; }
@media(max-width:500px){.checks{grid-template-columns:1fr;}}

.check-item {
  display:flex;align-items:center;gap:0.55rem;
  background:rgba(255,255,255,0.025);border:1px solid var(--border);
  border-radius:8px;padding:0.55rem 0.8rem;font-size:0.8rem;
}
.check-dot { width:7px;height:7px;border-radius:50%;flex-shrink:0; }
.check-dot.ok  { background:var(--safe);   }
.check-dot.bad { background:var(--danger); }
.check-dot.mid { background:var(--warn);   }
.check-label { color:var(--muted2); }
.check-value { font-weight:700;margin-left:auto;font-family:'JetBrains Mono',monospace;font-size:0.72rem; }
.check-value.ok  { color:var(--safe);   }
.check-value.bad { color:var(--danger); }
.check-value.mid { color:var(--warn);   }

/* ‚îÄ‚îÄ ISSUES BOX ‚îÄ‚îÄ */
.issues-box {
  margin-top:1rem;font-size:0.78rem;color:var(--muted2);
  background:rgba(255,184,0,0.04);border:1px solid rgba(255,184,0,0.15);
  border-radius:8px;padding:0.8rem 1rem;line-height:1.7;
}

/* ‚îÄ‚îÄ PASSWORD GENERATOR ‚îÄ‚îÄ */
.pass-display {
  background:var(--bg); border:1px solid var(--border);border-radius:10px;
  padding:1rem 1.2rem; font-family:'JetBrains Mono',monospace;
  font-size:1.1rem; letter-spacing:0.1em; color:var(--accent);
  word-break:break-all; min-height:3rem;
  display:flex;align-items:center;justify-content:space-between;gap:1rem;
  margin-bottom:1rem;
}
.copy-btn {
  background:rgba(0,217,255,0.1);border:1px solid rgba(0,217,255,0.2);
  color:var(--accent);border-radius:7px;padding:0.4rem 0.7rem;
  font-family:'Syne',sans-serif;font-size:0.75rem;font-weight:700;
  cursor:pointer;transition:all 0.2s;white-space:nowrap;
}
.copy-btn:hover { background:rgba(0,217,255,0.2); }
.copy-btn.copied { color:var(--safe);border-color:rgba(0,233,138,0.3);background:rgba(0,233,138,0.1); }

.pass-options { display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;margin-bottom:1rem; }
@media(max-width:500px){.pass-options{grid-template-columns:1fr;}}

.option-item {
  display:flex;align-items:center;justify-content:space-between;
  background:var(--bg);border:1px solid var(--border);border-radius:8px;
  padding:0.6rem 0.9rem;font-size:0.82rem;
}
.option-label { color:var(--muted2); }

.toggle {
  width:36px;height:20px;background:var(--border);border-radius:99px;
  position:relative;cursor:pointer;transition:background 0.2s;border:none;
}
.toggle.on { background:var(--accent); }
.toggle::after {
  content:'';position:absolute;width:14px;height:14px;background:#fff;
  border-radius:50%;top:3px;left:3px;transition:transform 0.2s;
}
.toggle.on::after { transform:translateX(16px); }

.len-row { display:flex;align-items:center;gap:0.8rem;margin-bottom:1rem; }
.len-slider {
  flex:1;-webkit-appearance:none;height:4px;background:var(--border);
  border-radius:99px;outline:none;cursor:pointer;
}
.len-slider::-webkit-slider-thumb {
  -webkit-appearance:none;width:16px;height:16px;
  background:var(--accent);border-radius:50%;cursor:pointer;
}
.len-val {
  font-family:'JetBrains Mono',monospace;font-size:0.85rem;
  color:var(--accent);font-weight:600;min-width:2rem;text-align:right;
}

.strength-bar { margin-bottom:1rem; }
.strength-segments { display:flex;gap:3px;height:4px;border-radius:99px;overflow:hidden; }
.strength-seg { flex:1;border-radius:99px;background:var(--border);transition:background 0.3s; }
.strength-text { font-size:0.75rem;color:var(--muted);margin-top:0.4rem; }

/* ‚îÄ‚îÄ EMAIL TOOL ‚îÄ‚îÄ */
.email-result-detail { margin-top:1rem; }
.detail-row {
  display:flex;align-items:flex-start;gap:0.8rem;
  padding:0.6rem 0;border-bottom:1px solid var(--border);font-size:0.85rem;
}
.detail-row:last-child { border-bottom:none; }
.detail-key { color:var(--muted2);min-width:140px;font-size:0.8rem; }
.detail-val { color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.8rem;word-break:break-all; }
.tag {
  display:inline-block;padding:0.15rem 0.5rem;border-radius:4px;
  font-size:0.7rem;font-weight:700;letter-spacing:0.05em;margin-right:0.3rem;
}
.tag.ok   { background:rgba(0,233,138,0.12);color:var(--safe);border:1px solid rgba(0,233,138,0.2); }
.tag.bad  { background:rgba(255,62,108,0.12);color:var(--danger);border:1px solid rgba(255,62,108,0.2); }
.tag.mid  { background:rgba(255,184,0,0.12);color:var(--warn);border:1px solid rgba(255,184,0,0.2); }

/* ‚îÄ‚îÄ QR TOOL ‚îÄ‚îÄ */
.qr-drop {
  border:2px dashed var(--border2);border-radius:12px;
  padding:2.5rem;text-align:center;cursor:pointer;
  transition:border-color 0.2s,background 0.2s;
  background:var(--bg);
}
.qr-drop:hover, .qr-drop.drag-over {
  border-color:var(--accent);background:rgba(0,217,255,0.04);
}
.qr-drop-icon { font-size:2.5rem;margin-bottom:0.8rem; }
.qr-drop p { color:var(--muted2);font-size:0.9rem;line-height:1.5; }
.qr-drop small { color:var(--muted);font-size:0.75rem; }
#qrFileInput { display:none; }

.qr-preview { display:none;margin-top:1rem; }
.qr-preview.visible { display:block; }
.qr-img-wrap {
  display:flex;justify-content:center;margin-bottom:1rem;
}
.qr-img {
  max-width:200px;border-radius:12px;
  border:2px solid var(--border2);
}

/* ‚îÄ‚îÄ PREMIUM SECTION ‚îÄ‚îÄ */
.premium-section {
  max-width:780px;margin:0 auto;padding:2rem 1.5rem 5rem;
  animation:fadeUp 0.4s ease both;
}

.premium-header { text-align:center;margin-bottom:3rem; }
.premium-header h2 { font-size:2rem;font-weight:800;margin-bottom:0.6rem; }
.premium-header h2 span {
  background:linear-gradient(135deg,#7c3aed,#a855f7);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.premium-header p { color:var(--muted2);font-size:0.95rem; }

.pricing-grid { display:grid;grid-template-columns:1fr 1fr;gap:1.2rem; }
@media(max-width:560px){.pricing-grid{grid-template-columns:1fr;}}

.pricing-card {
  background:var(--surface);border:1px solid var(--border);
  border-radius:16px;padding:1.8rem;position:relative;overflow:hidden;
  transition:border-color 0.2s,transform 0.2s;
}
.pricing-card:hover { transform:translateY(-2px); }
.pricing-card.featured {
  border-color:rgba(124,58,237,0.5);
  background:linear-gradient(160deg,rgba(124,58,237,0.08),var(--surface));
}
.pricing-card.featured::before {
  content:''; position:absolute;top:0;left:0;right:0;height:2px;
  background:linear-gradient(90deg,transparent,#a855f7,transparent);
}

.plan-badge {
  display:inline-block;padding:0.2rem 0.7rem;border-radius:6px;
  font-size:0.7rem;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;
  margin-bottom:1rem;
}
.plan-badge.free { background:rgba(0,233,138,0.12);color:var(--safe);border:1px solid rgba(0,233,138,0.2); }
.plan-badge.pro  { background:rgba(124,58,237,0.15);color:#a855f7;border:1px solid rgba(124,58,237,0.3); }
.plan-badge.best { background:linear-gradient(135deg,#7c3aed,#a855f7);color:#fff; }

.plan-name { font-size:1.3rem;font-weight:800;margin-bottom:0.3rem; }
.plan-price { font-size:2rem;font-weight:800;margin-bottom:0.2rem; }
.plan-price span { font-size:0.9rem;font-weight:400;color:var(--muted2); }
.plan-price.featured-price {
  background:linear-gradient(135deg,#7c3aed,#a855f7);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.plan-desc { color:var(--muted2);font-size:0.82rem;margin-bottom:1.3rem;line-height:1.5; }

.plan-features { list-style:none;margin-bottom:1.5rem; }
.plan-features li {
  display:flex;align-items:center;gap:0.6rem;
  font-size:0.84rem;padding:0.35rem 0;color:#8a9eb8;
}
.plan-features li::before { content:'‚úì';color:var(--safe);font-weight:700;flex-shrink:0; }
.plan-features li.locked { color:var(--muted); }
.plan-features li.locked::before { content:'‚úó';color:var(--muted); }

.plan-btn {
  width:100%;padding:0.85rem;border-radius:10px;font-family:'Syne',sans-serif;
  font-size:0.9rem;font-weight:700;cursor:pointer;transition:all 0.2s;border:none;
}
.plan-btn.free-btn {
  background:rgba(255,255,255,0.06);border:1px solid var(--border2);color:var(--text);
}
.plan-btn.free-btn:hover { background:rgba(255,255,255,0.1); }
.plan-btn.pro-btn {
  background:linear-gradient(135deg,#7c3aed,#a855f7);color:#fff;
  box-shadow:0 4px 20px rgba(124,58,237,0.35);
}
.plan-btn.pro-btn:hover { opacity:0.9;transform:translateY(-1px); }

.savings-badge {
  background:rgba(0,233,138,0.12);border:1px solid rgba(0,233,138,0.25);
  color:var(--safe);font-size:0.72rem;font-weight:700;border-radius:6px;
  padding:0.2rem 0.5rem;margin-left:0.5rem;
}

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.modal-overlay {
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,0.75);backdrop-filter:blur(8px);
  z-index:1000;align-items:center;justify-content:center;padding:1.5rem;
}
.modal-overlay.visible { display:flex;animation:fadeIn 0.2s ease; }
.modal {
  background:var(--surface);border:1px solid var(--border2);
  border-radius:20px;width:100%;max-width:440px;
  padding:2rem;position:relative;animation:slideUp 0.3s ease both;
}
.modal-close {
  position:absolute;top:1rem;right:1rem;background:rgba(255,255,255,0.06);
  border:none;color:var(--muted2);border-radius:8px;
  width:30px;height:30px;cursor:pointer;font-size:1.1rem;
  display:flex;align-items:center;justify-content:center;
}
.modal-close:hover { background:rgba(255,255,255,0.1);color:var(--text); }
.modal h3 { font-size:1.3rem;font-weight:800;margin-bottom:0.4rem; }
.modal p { color:var(--muted2);font-size:0.88rem;margin-bottom:1.5rem;line-height:1.5; }
.modal-plan-choice { display:flex;gap:0.8rem;margin-bottom:1.5rem; }
.choice-btn {
  flex:1;padding:0.8rem;border-radius:10px;border:1px solid var(--border2);
  background:var(--bg);color:var(--text);font-family:'Syne',sans-serif;
  font-weight:700;font-size:0.85rem;cursor:pointer;transition:all 0.2s;text-align:center;
}
.choice-btn:hover, .choice-btn.selected {
  border-color:rgba(124,58,237,0.5);background:rgba(124,58,237,0.1);color:#a855f7;
}
.choice-price { font-size:1.1rem;font-weight:800;color:#a855f7; }
.choice-label { font-size:0.72rem;color:var(--muted2); }
.modal-input {
  width:100%;background:var(--bg);border:1px solid var(--border);
  border-radius:10px;padding:0.8rem 1rem;color:var(--text);
  font-family:'JetBrains Mono',monospace;font-size:0.88rem;outline:none;
  margin-bottom:0.8rem;transition:border-color 0.2s;
}
.modal-input:focus { border-color:rgba(124,58,237,0.5); }
.modal-submit {
  width:100%;padding:0.95rem;background:linear-gradient(135deg,#7c3aed,#a855f7);
  color:#fff;border:none;border-radius:10px;font-family:'Syne',sans-serif;
  font-weight:700;font-size:0.95rem;cursor:pointer;transition:all 0.2s;
  box-shadow:0 4px 20px rgba(124,58,237,0.35);
}
.modal-submit:hover { opacity:0.9;transform:translateY(-1px); }
.modal-note { font-size:0.72rem;color:var(--muted);text-align:center;margin-top:0.8rem;line-height:1.5; }

/* ‚îÄ‚îÄ SUCCESS MODAL ‚îÄ‚îÄ */
.success-icon { font-size:3rem;text-align:center;margin-bottom:1rem; }
.success-title { font-size:1.4rem;font-weight:800;text-align:center;margin-bottom:0.5rem;color:var(--safe); }

/* ‚îÄ‚îÄ AD PLACEHOLDER ‚îÄ‚îÄ */
.ad-placeholder {
  background:rgba(255,255,255,0.02);border:1px dashed var(--border);
  border-radius:12px;padding:1.2rem;text-align:center;
  color:var(--muted);font-size:0.75rem;letter-spacing:0.05em;
  margin-bottom:1.5rem;
}
.ad-placeholder strong { display:block;font-size:0.65rem;text-transform:uppercase;letter-spacing:0.1em;margin-bottom:0.3rem; }

/* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
@keyframes fadeDown { from{opacity:0;transform:translateY(-16px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeUp   { from{opacity:0;transform:translateY(14px)}  to{opacity:1;transform:translateY(0)} }
@keyframes fadeIn   { from{opacity:0} to{opacity:1} }
@keyframes slideUp  { from{opacity:0;transform:translateY(24px)} to{opacity:1;transform:translateY(0)} }
@keyframes spin     { to{transform:rotate(360deg)} }

/* ‚îÄ‚îÄ RESPONSIVE NAV ‚îÄ‚îÄ */
@media(max-width:600px){
  .nav-links { display:none; }
  .navbar { gap:1rem; }
}
</style>
</head>
<body>

<!-- ‚îÄ‚îÄ NAVBAR ‚îÄ‚îÄ -->
<nav class="navbar">
  <div class="nav-logo">
    <div class="nav-logo-icon">üõ°</div>
    LinkGuard
  </div>
  <div class="nav-links">
    <button class="nav-btn active" onclick="showSection('tools',this)">Outils</button>
    <button class="nav-btn" onclick="showSection('premium-section',this)">Tarifs</button>
  </div>
  <button class="nav-premium-btn" onclick="openModal()">‚ö° Passer Premium</button>
</nav>

<!-- ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ -->
<main>

<!-- HERO -->
<section class="hero">
  <div class="hero-badge">üõ° Suite de s√©curit√© gratuite</div>
  <h1>Prot√©gez-vous<br>des <span>menaces en ligne</span></h1>
  <p>V√©rifiez liens, mots de passe et emails suspects. Tous vos outils de cybers√©curit√© au m√™me endroit.</p>
  <div class="hero-stats">
    <div class="stat"><div class="stat-num">5</div><div class="stat-label">Outils</div></div>
    <div class="stat"><div class="stat-num">100%</div><div class="stat-label">Local</div></div>
    <div class="stat"><div class="stat-num">0‚Ç¨</div><div class="stat-label">De base</div></div>
  </div>
</section>

<!-- ‚îÄ‚îÄ AD BANNER ‚îÄ‚îÄ -->
<div style="max-width:780px;margin:0 auto;padding:0 1.5rem 0.5rem;">
  <div class="ad-placeholder">
    <strong>Espace publicitaire ‚Äî Google AdSense</strong>
    Int√©grez votre code AdSense ici pour mon√©tiser ce bloc
  </div>
</div>

<!-- ‚îÄ‚îÄ TOOLS ‚îÄ‚îÄ -->
<section class="tools-section" id="tools">

  <!-- TABS -->
  <div class="tool-tabs">
    <button class="tab-btn active" onclick="switchTab('link',this)">
      <span class="tab-icon">üîó</span> Liens
    </button>
    <button class="tab-btn" onclick="switchTab('password-check',this)">
      <span class="tab-icon">üîí</span> Mot de passe
    </button>
    <button class="tab-btn" onclick="switchTab('passgen',this)">
      <span class="tab-icon">‚öôÔ∏è</span> G√©n√©rateur
    </button>
    <button class="tab-btn" onclick="switchTab('email',this)">
      <span class="tab-icon">üìß</span> Email
    </button>
    <button class="tab-btn" onclick="switchTab('qr',this)">
      <span class="tab-icon">üì∑</span> QR Code
      <span class="tab-badge">PRO</span>
    </button>
  </div>

  <!-- ‚ïê‚ïê‚ïê TAB: LINK ‚ïê‚ïê‚ïê -->
  <div class="tool-panel active" id="tab-link">
    <div class="card">
      <label class="input-label">URL √† analyser</label>
      <div class="input-row">
        <input type="text" class="tool-input" id="linkInput"
          placeholder="https://exemple.com/lien-suspect..." autocomplete="off" spellcheck="false">
        <button class="action-btn" id="linkBtn" onclick="analyzeLink()">V√©rifier ‚Üí</button>
      </div>
      <div class="error-msg" id="linkError"></div>
    </div>
    <div class="loading" id="linkLoading">
      <div class="spinner"></div>
      <div class="loading-text">Analyse en cours...</div>
    </div>
    <div class="result" id="linkResult">
      <div class="result-card" id="linkResultCard">
        <div class="result-glow"></div>
        <div class="result-header">
          <div class="result-icon" id="linkIcon"></div>
          <div>
            <div class="result-title" id="linkTitle"></div>
            <div class="result-sub" id="linkSub"></div>
          </div>
        </div>
        <p class="result-desc" id="linkDesc"></p>
        <div class="score-bar-wrap">
          <div class="score-bar-label"><span>Score de s√©curit√©</span><span id="linkScoreText"></span></div>
          <div class="score-bar-track"><div class="score-bar-fill" id="linkScoreBar" style="width:0%"></div></div>
        </div>
        <div class="checks" id="linkChecks"></div>
        <div class="issues-box" id="linkIssues" style="display:none"></div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê TAB: PASSWORD CHECK ‚ïê‚ïê‚ïê -->
  <div class="tool-panel" id="tab-password-check">
    <div class="card">
      <label class="input-label">Tester votre mot de passe</label>
      <div class="input-row">
        <input type="password" class="tool-input" id="passCheckInput"
          placeholder="Entrez votre mot de passe..." autocomplete="new-password">
        <button class="action-btn" onclick="checkPassword()">Analyser ‚Üí</button>
      </div>
      <div class="error-msg" id="passCheckError"></div>
    </div>
    <div class="result" id="passCheckResult">
      <div class="result-card" id="passCheckCard">
        <div class="result-glow"></div>
        <div class="result-header">
          <div class="result-icon" id="passCheckIcon"></div>
          <div>
            <div class="result-title" id="passCheckTitle"></div>
            <div class="result-sub" id="passCheckSub"></div>
          </div>
        </div>
        <p class="result-desc" id="passCheckDesc"></p>
        <div class="score-bar-wrap">
          <div class="score-bar-label"><span>Solidit√©</span><span id="passCheckScore"></span></div>
          <div class="score-bar-track"><div class="score-bar-fill" id="passCheckBar" style="width:0%"></div></div>
        </div>
        <div class="checks" id="passCheckGrid"></div>
        <div class="issues-box" id="passCheckIssues" style="display:none"></div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê TAB: PASSGEN ‚ïê‚ïê‚ïê -->
  <div class="tool-panel" id="tab-passgen">
    <div class="card">
      <label class="input-label">Mot de passe g√©n√©r√©</label>
      <div class="pass-display" id="passDisplay">
        <span id="passText" style="word-break:break-all;">Cliquez sur G√©n√©rer</span>
        <button class="copy-btn" id="copyBtn" onclick="copyPass()">Copier</button>
      </div>
      <div class="strength-bar">
        <div class="strength-segments" id="strengthSegs">
          <div class="strength-seg"></div><div class="strength-seg"></div>
          <div class="strength-seg"></div><div class="strength-seg"></div>
          <div class="strength-seg"></div>
        </div>
        <div class="strength-text" id="strengthText">‚Äî</div>
      </div>
      <div class="len-row">
        <label class="input-label" style="margin:0;white-space:nowrap">Longueur</label>
        <input type="range" class="len-slider" id="lenSlider" min="8" max="64" value="20" oninput="updateLen()">
        <div class="len-val" id="lenVal">20</div>
      </div>
      <div class="pass-options">
        <div class="option-item"><span class="option-label">Majuscules (A-Z)</span><button class="toggle on" id="togUpper" onclick="toggleOpt(this)"></button></div>
        <div class="option-item"><span class="option-label">Minuscules (a-z)</span><button class="toggle on" id="togLower" onclick="toggleOpt(this)"></button></div>
        <div class="option-item"><span class="option-label">Chiffres (0-9)</span><button class="toggle on" id="togNum" onclick="toggleOpt(this)"></button></div>
        <div class="option-item"><span class="option-label">Symboles (!@#...)</span><button class="toggle on" id="togSym" onclick="toggleOpt(this)"></button></div>
      </div>
      <button class="action-btn" style="width:100%" onclick="generatePass()">‚öô G√©n√©rer un nouveau mot de passe</button>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê TAB: EMAIL ‚ïê‚ïê‚ïê -->
  <div class="tool-panel" id="tab-email">
    <div class="card">
      <label class="input-label">Analyser une adresse email</label>
      <div class="input-row">
        <input type="text" class="tool-input" id="emailInput"
          placeholder="exemple@domaine.com" autocomplete="off" spellcheck="false">
        <button class="action-btn" onclick="analyzeEmail()">V√©rifier ‚Üí</button>
      </div>
      <div class="error-msg" id="emailError"></div>
    </div>
    <div class="loading" id="emailLoading">
      <div class="spinner"></div>
      <div class="loading-text">Analyse en cours...</div>
    </div>
    <div class="result" id="emailResult">
      <div class="result-card" id="emailResultCard">
        <div class="result-glow"></div>
        <div class="result-header">
          <div class="result-icon" id="emailIcon"></div>
          <div>
            <div class="result-title" id="emailTitle"></div>
            <div class="result-sub" id="emailSub"></div>
          </div>
        </div>
        <p class="result-desc" id="emailDesc"></p>
        <div class="email-result-detail" id="emailDetail"></div>
        <div class="issues-box" id="emailIssues" style="display:none"></div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê TAB: QR CODE (PRO) ‚ïê‚ïê‚ïê -->
  <div class="tool-panel" id="tab-qr">
    <!-- Premium gate -->
    <div id="qrGate">
      <div class="card" style="text-align:center;padding:3rem 2rem;">
        <div style="font-size:3rem;margin-bottom:1rem;">üì∑</div>
        <div style="font-size:1.2rem;font-weight:800;margin-bottom:0.5rem;">Fonctionnalit√© Premium</div>
        <p style="color:var(--muted2);font-size:0.9rem;margin-bottom:1.5rem;line-height:1.6;">
          Le scanner de QR Code est r√©serv√© aux membres Premium.<br>
          D√©verrouillez-le pour seulement <strong style="color:#a855f7">7,99‚Ç¨/mois</strong>.
        </p>
        <button class="action-btn" style="background:linear-gradient(135deg,#7c3aed,#a855f7);color:#fff;" onclick="openModal()">
          ‚ö° D√©bloquer avec Premium
        </button>
      </div>
    </div>
    <!-- Actual QR tool (unlocked for demo) -->
    <div id="qrTool" style="display:none;">
      <div class="card">
        <label class="input-label">Scanner / Analyser un QR Code</label>
        <div class="qr-drop" id="qrDrop" onclick="document.getElementById('qrFileInput').click()">
          <div class="qr-drop-icon">üì∑</div>
          <p>Cliquez ou glissez une image de QR Code ici</p>
          <small>PNG, JPG, WEBP ‚Äî Max 5MB</small>
        </div>
        <input type="file" id="qrFileInput" accept="image/*" onchange="handleQR(this)">
        <div class="qr-preview" id="qrPreview">
          <div class="qr-img-wrap">
            <img class="qr-img" id="qrImg" src="" alt="QR preview">
          </div>
        </div>
      </div>
      <div class="result" id="qrResult">
        <div class="result-card" id="qrResultCard">
          <div class="result-glow"></div>
          <div class="result-header">
            <div class="result-icon" id="qrIcon"></div>
            <div>
              <div class="result-title" id="qrTitle"></div>
              <div class="result-sub" id="qrSub"></div>
            </div>
          </div>
          <p class="result-desc" id="qrDesc"></p>
          <div class="checks" id="qrChecks"></div>
        </div>
      </div>
    </div>
  </div>

</section>

<!-- ‚îÄ‚îÄ PREMIUM SECTION ‚îÄ‚îÄ -->
<section class="premium-section" id="premium-section" style="display:none;">
  <div class="premium-header">
    <h2>Choisissez votre plan <span>LinkGuard</span></h2>
    <p>Commencez gratuitement, passez Premium quand vous voulez.</p>
  </div>
  <div class="pricing-grid">
    <!-- FREE -->
    <div class="pricing-card">
      <div class="plan-badge free">Gratuit</div>
      <div class="plan-name">Essentiel</div>
      <div class="plan-price">0‚Ç¨ <span>/ toujours</span></div>
      <p class="plan-desc">Les outils de base pour rester prot√©g√© au quotidien.</p>
      <ul class="plan-features">
        <li>V√©rificateur de liens</li>
        <li>Analyse de mot de passe</li>
        <li>G√©n√©rateur de mots de passe</li>
        <li>V√©rificateur d'email</li>
        <li class="locked">Scanner QR Code</li>
        <li class="locked">Historique illimit√©</li>
        <li class="locked">Rapport PDF</li>
        <li class="locked">Sans publicit√©s</li>
      </ul>
      <button class="plan-btn free-btn" onclick="showSection('tools',null)">Utiliser gratuitement</button>
    </div>
    <!-- PREMIUM -->
    <div class="pricing-card featured">
      <div class="plan-badge best">‚ö° Recommand√©</div>
      <div class="plan-name">Premium</div>
      <div class="plan-price featured-price">
        7,99‚Ç¨ <span>/ mois</span>
      </div>
      <p class="plan-desc">
        Acc√®s complet √† tous les outils + sans publicit√©s.
        <br><strong style="color:var(--safe)">Ou 50‚Ç¨/an <span class="savings-badge">‚àí48%</span></strong>
      </p>
      <ul class="plan-features">
        <li>Tout le plan Gratuit</li>
        <li>Scanner QR Code</li>
        <li>Historique illimit√©</li>
        <li>Rapport PDF d√©taill√©</li>
        <li>Sans publicit√©s</li>
        <li>Support prioritaire</li>
        <li>Nouvelles fonctions en avant-premi√®re</li>
      </ul>
      <button class="plan-btn pro-btn" onclick="openModal()">‚ö° Passer Premium</button>
    </div>
  </div>
  <p style="text-align:center;color:var(--muted);font-size:0.75rem;margin-top:1.5rem;">
    Paiement s√©curis√© ¬∑ Annulation √† tout moment ¬∑ Aucun engagement
  </p>
</section>

</main>

<!-- ‚îÄ‚îÄ PREMIUM MODAL ‚îÄ‚îÄ -->
<div class="modal-overlay" id="premiumModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal()">‚úï</button>
    <div id="modalContent">
      <h3>‚ö° Passer √† Premium</h3>
      <p>Choisissez votre formule et d√©bloquez tous les outils LinkGuard.</p>
      <div class="modal-plan-choice">
        <div class="choice-btn selected" id="planMonthly" onclick="selectPlan('monthly')">
          <div class="choice-price">7,99‚Ç¨</div>
          <div class="choice-label">par mois</div>
        </div>
        <div class="choice-btn" id="planAnnual" onclick="selectPlan('annual')">
          <div class="choice-price">50‚Ç¨</div>
          <div class="choice-label">par an <span style="color:var(--safe);font-size:0.65rem;">‚àí48%</span></div>
        </div>
      </div>
      <input type="email" class="modal-input" id="modalEmail" placeholder="Votre adresse email">
      <input type="text" class="modal-input" id="modalName" placeholder="Votre nom complet">
      <button class="modal-submit" onclick="submitPremium()">
        Continuer vers le paiement ‚Üí
      </button>
      <p class="modal-note">
        üîí Paiement s√©curis√© via PayPal ¬∑ Annulable √† tout moment<br>
        Aucune carte requise pour l'essai gratuit
      </p>
    </div>
    <div id="modalSuccess" style="display:none;text-align:center;">
      <div class="success-icon">üéâ</div>
      <div class="success-title">Merci pour votre int√©r√™t !</div>
      <p style="color:var(--muted2);font-size:0.88rem;margin-top:0.5rem;line-height:1.6;">
        Vous allez recevoir un email avec les instructions de paiement et d'activation.
        Le scanner QR Code et toutes les fonctionnalit√©s premium seront d√©bloqu√©s imm√©diatement apr√®s confirmation.
      </p>
      <button class="action-btn" style="margin-top:1.5rem;width:100%" onclick="closeModal()">Fermer</button>
    </div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NAVIGATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showSection(id, btn) {
  document.getElementById('tools').style.display = id==='tools' ? '' : 'none';
  document.getElementById('premium-section').style.display = id==='premium-section' ? '' : 'none';
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  if(btn) btn.classList.add('active');
}

function switchTab(id, btn) {
  document.querySelectorAll('.tool-panel').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('tab-'+id).classList.add('active');
  btn.classList.add('active');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MODAL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let selectedPlan = 'monthly';
function openModal() {
  document.getElementById('premiumModal').classList.add('visible');
  document.getElementById('modalContent').style.display='';
  document.getElementById('modalSuccess').style.display='none';
}
function closeModal() { document.getElementById('premiumModal').classList.remove('visible'); }
function selectPlan(plan) {
  selectedPlan = plan;
  document.getElementById('planMonthly').classList.toggle('selected', plan==='monthly');
  document.getElementById('planAnnual').classList.toggle('selected', plan==='annual');
}
function submitPremium() {
  const email = document.getElementById('modalEmail').value.trim();
  const name  = document.getElementById('modalName').value.trim();
  if(!email || !name) { alert('Veuillez remplir tous les champs.'); return; }
  // Redirect to PayPal with the plan info
  const price = selectedPlan === 'monthly' ? '7.99' : '50.00';
  const desc  = selectedPlan === 'monthly' ? 'LinkGuard Premium - Mensuel' : 'LinkGuard Premium - Annuel';
  const paypalUrl = `https://www.paypal.com/paypalme/louistoupin?amount=${price}&currencyCode=EUR`;
  window.open(paypalUrl, '_blank');
  document.getElementById('modalContent').style.display='none';
  document.getElementById('modalSuccess').style.display='';
}
document.getElementById('premiumModal').addEventListener('click', function(e) {
  if(e.target === this) closeModal();
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// 1. LINK CHECKER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const PHISHING_KW = ['login','signin','verify','secure','account','update','bank','paypal',
  'amazon','netflix','microsoft','apple','google','facebook','instagram','snapchat',
  'password','confirm','wallet','crypto','bitcoin','urgent','suspended','limited',
  'click','free','gift','prize','winner','hack','cracked'];
const BAD_TLDS  = ['.xyz','.tk','.ml','.ga','.cf','.gq','.top','.click','.win','.loan',
  '.work','.download','.zip','.link','.icu','.su'];
const SAFE_TLDS = ['.fr','.com','.org','.net','.gov','.edu','.be','.ch','.ca','.uk','.de','.it','.es'];
const SHORTENERS = ['bit.ly','tinyurl.com','t.co','ow.ly','goo.gl','rb.gy','is.gd','cutt.ly'];
const TRUSTED = ['google.com','youtube.com','github.com','wikipedia.org','mozilla.org',
  'anthropic.com','apple.com','microsoft.com','amazon.com','netflix.com',
  'cloudflare.com','stackoverflow.com','reddit.com','twitter.com','x.com',
  'facebook.com','instagram.com','linkedin.com','discord.com','twitch.tv',
  'lemonde.fr','lefigaro.fr','bbc.com','nytimes.com','ouest-france.fr'];

async function analyzeLink() {
  const raw = document.getElementById('linkInput').value.trim();
  const err = document.getElementById('linkError');
  err.classList.remove('visible');
  document.getElementById('linkResult').classList.remove('visible');
  if(!raw){showErr(err,'Veuillez entrer une URL.');return;}
  document.getElementById('linkBtn').disabled=true;
  showLoading('linkLoading',true);
  await sleep(1400+Math.random()*600);
  showLoading('linkLoading',false);

  let url, score=100, issues=[], checks=[];
  let norm = raw; if(!/^https?:\/\//i.test(norm)) norm='https://'+norm;
  try{ url=new URL(norm); }catch{showErr(err,'URL invalide. Format: https://exemple.com'); document.getElementById('linkBtn').disabled=false; return;}

  const host=url.hostname.toLowerCase();
  const tld='.'+host.split('.').slice(-1)[0];
  const isHTTPS=url.protocol==='https:';
  const isTrusted=TRUSTED.some(d=>host===d||host.endsWith('.'+d));
  const isShort=SHORTENERS.some(d=>host===d||host.endsWith('.'+d));
  const isIP=/^\d{1,3}(\.\d{1,3}){3}$/.test(host);
  const parts=host.split('.');
  const kws=PHISHING_KW.filter(k=>host.includes(k));
  const urlLen=norm.length;
  const isPuny=host.includes('xn--');

  if(isHTTPS){checks.push({l:'HTTPS',v:'OUI',s:'ok'});}else{score-=30;issues.push('Le site n\'utilise pas HTTPS.');checks.push({l:'HTTPS',v:'NON',s:'bad'});}
  if(isTrusted){score+=20;checks.push({l:'Domaine reconnu',v:'FIABLE',s:'ok'});}
  if(isShort){score-=25;issues.push('Raccourcisseur d\'URL ‚Äî destination cach√©e.');checks.push({l:'Raccourcisseur',v:'OUI',s:'bad'});}else{checks.push({l:'Raccourcisseur',v:'NON',s:'ok'});}
  if(BAD_TLDS.includes(tld)){score-=20;issues.push('Extension suspecte : '+tld);checks.push({l:'Extension',v:tld.toUpperCase(),s:'bad'});}else{checks.push({l:'Extension',v:tld.toUpperCase(),s:SAFE_TLDS.includes(tld)?'ok':'mid'});}
  if(isIP){score-=35;issues.push('Adresse IP directe d√©tect√©e.');checks.push({l:'Adresse IP',v:'OUI',s:'bad'});}else{checks.push({l:'Adresse IP',v:'NON',s:'ok'});}
  if(parts.length>4){score-=20;issues.push('Trop de sous-domaines.');checks.push({l:'Sous-domaines',v:parts.length-2+' EXTRA',s:'bad'});}else{checks.push({l:'Sous-domaines',v:'NORMAL',s:'ok'});}
  if(kws.length>=2){score-=25;issues.push('Mots suspects : "'+kws.slice(0,3).join('", "'")+'"');checks.push({l:'Mots suspects',v:kws.length+' TROUV√â(S)',s:'bad'});}
  else if(kws.length===1){score-=10;checks.push({l:'Mots suspects',v:'1 TROUV√â',s:'mid'});}
  else{checks.push({l:'Mots suspects',v:'AUCUN',s:'ok'});}
  if(urlLen>200){score-=15;issues.push('URL anormalement longue.');checks.push({l:'Longueur',v:urlLen+' CHARS',s:'bad'});}else{checks.push({l:'Longueur',v:urlLen+' CHARS',s:'ok'});}
  if(isPuny){score-=30;issues.push('Punycode d√©tect√© ‚Äî risque d\'homographe.');checks.push({l:'Homographe',v:'RISQUE',s:'bad'});}else{checks.push({l:'Homographe',v:'NON',s:'ok'});}
  score=Math.max(0,Math.min(100,score));

  let level,title,icon,desc;
  if(isTrusted&&score>=80){level='safe';title='Lien S√ªr';icon='‚úÖ';desc='Ce lien pointe vers un domaine reconnu et fiable.';}
  else if(score>=70){level='safe';title='Probablement S√ªr';icon='‚úÖ';desc='Aucun indicateur majeur d√©tect√©. Restez quand m√™me vigilant.';}
  else if(score>=40){level='warn';title='Suspect ‚Äî Prudence';icon='‚ö†Ô∏è';desc='Plusieurs indicateurs inhabituels. Ne saisissez pas d\'informations personnelles.';}
  else{level='danger';title='Lien Dangereux !';icon='üö®';desc='Nombreux signes de phishing ou malware. Ne cliquez pas !';}

  const c=document.getElementById('linkResultCard');
  c.className='result-card '+level;
  document.getElementById('linkIcon').textContent=icon;
  document.getElementById('linkTitle').textContent=title;
  document.getElementById('linkSub').textContent=raw.length>60?raw.slice(0,60)+'‚Ä¶':raw;
  document.getElementById('linkDesc').textContent=desc;
  const col=level==='safe'?'var(--safe)':level==='warn'?'var(--warn)':'var(--danger)';
  const bar=document.getElementById('linkScoreBar');
  bar.style.background=col; bar.style.width='0%';
  setTimeout(()=>bar.style.width=score+'%',50);
  document.getElementById('linkScoreText').textContent=score+'/100';
  document.getElementById('linkScoreText').style.color=col;
  document.getElementById('linkChecks').innerHTML=checks.map(ch=>`<div class="check-item"><div class="check-dot ${ch.s}"></div><span class="check-label">${ch.l}</span><span class="check-value ${ch.s}">${ch.v}</span></div>`).join('');
  const ib=document.getElementById('linkIssues');
  if(issues.length){ib.style.display='';ib.innerHTML='‚ö†Ô∏è <strong>Points d\'attention :</strong><br>'+issues.map(i=>'‚Ä¢ '+i).join('<br>');}else{ib.style.display='none';}
  document.getElementById('linkResult').classList.add('visible');
  document.getElementById('linkBtn').disabled=false;
}
document.getElementById('linkInput').addEventListener('keydown',e=>{if(e.key==='Enter')analyzeLink();});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// 2. PASSWORD CHECKER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const COMMON_PASSWORDS = ['password','123456','azerty','qwerty','111111','password1','iloveyou','admin','letmein','welcome','monkey','dragon','master','abc123','pass123','12345678'];

function checkPassword() {
  const p=document.getElementById('passCheckInput').value;
  const err=document.getElementById('passCheckError');
  err.classList.remove('visible');
  if(!p){showErr(err,'Entrez un mot de passe.');return;}

  let score=0,issues=[],checks=[];
  const hasUpper=/[A-Z]/.test(p), hasLower=/[a-z]/.test(p);
  const hasNum=/[0-9]/.test(p), hasSym=/[^A-Za-z0-9]/.test(p);
  const len=p.length;
  const isCommon=COMMON_PASSWORDS.includes(p.toLowerCase());
  const hasRepeat=/(.)\1{2,}/.test(p);
  const hasSeq=/(abc|bcd|cde|def|efg|123|234|345|456|789|qwe|wer|ert|aze|zer|rty)/i.test(p);

  if(len>=8){score+=20;checks.push({l:'Longueur',v:len+' CHARS',s:'ok'});}
  else if(len>=6){score+=10;issues.push('Mot de passe trop court (min. 8 caract√®res).');checks.push({l:'Longueur',v:len+' CHARS',s:'mid'});}
  else{issues.push('Mot de passe beaucoup trop court.');checks.push({l:'Longueur',v:len+' CHARS',s:'bad'});}
  if(len>=12)score+=15; if(len>=16)score+=10;

  if(hasUpper){score+=15;checks.push({l:'Majuscules',v:'OUI',s:'ok'});}else{issues.push('Ajoutez des majuscules.');checks.push({l:'Majuscules',v:'NON',s:'bad'});}
  if(hasLower){score+=15;checks.push({l:'Minuscules',v:'OUI',s:'ok'});}else{issues.push('Ajoutez des minuscules.');checks.push({l:'Minuscules',v:'NON',s:'bad'});}
  if(hasNum){score+=15;checks.push({l:'Chiffres',v:'OUI',s:'ok'});}else{issues.push('Ajoutez des chiffres.');checks.push({l:'Chiffres',v:'NON',s:'bad'});}
  if(hasSym){score+=20;checks.push({l:'Symboles',v:'OUI',s:'ok'});}else{issues.push('Ajoutez des symboles (!@#...).');checks.push({l:'Symboles',v:'NON',s:'bad'});}
  if(isCommon){score=Math.min(score,15);issues.push('Mot de passe trop commun / dans les listes de fuite !');checks.push({l:'Commun',v:'OUI',s:'bad'});}else{checks.push({l:'Commun',v:'NON',s:'ok'});}
  if(hasRepeat){score-=10;issues.push('Caract√®res r√©p√©t√©s d√©tect√©s.');}
  if(hasSeq){score-=10;issues.push('S√©quences facilement devinables.');}
  score=Math.max(0,Math.min(100,score));

  let level,title,icon,desc;
  if(score>=80){level='safe';title='Mot de passe Fort';icon='üí™';desc='Excellent ! Ce mot de passe est difficile √† craquer.';}
  else if(score>=50){level='warn';title='Mot de passe Moyen';icon='‚ö†Ô∏è';desc='Acceptable mais am√©liorable. Suivez les conseils ci-dessous.';}
  else{level='danger';title='Mot de passe Faible !';icon='üö®';desc='Ce mot de passe est dangereux. Changez-le imm√©diatement.';}

  const c=document.getElementById('passCheckCard');
  c.className='result-card '+level;
  document.getElementById('passCheckIcon').textContent=icon;
  document.getElementById('passCheckTitle').textContent=title;
  document.getElementById('passCheckSub').textContent=len+' caract√®res ¬∑ Entropie estim√©e: ~'+ Math.round(score/100*128)+' bits';
  document.getElementById('passCheckDesc').textContent=desc;
  const col=level==='safe'?'var(--safe)':level==='warn'?'var(--warn)':'var(--danger)';
  const bar=document.getElementById('passCheckBar');
  bar.style.background=col;bar.style.width='0%';
  setTimeout(()=>bar.style.width=score+'%',50);
  document.getElementById('passCheckScore').textContent=score+'/100';
  document.getElementById('passCheckScore').style.color=col;
  document.getElementById('passCheckGrid').innerHTML=checks.map(ch=>`<div class="check-item"><div class="check-dot ${ch.s}"></div><span class="check-label">${ch.l}</span><span class="check-value ${ch.s}">${ch.v}</span></div>`).join('');
  const ib=document.getElementById('passCheckIssues');
  if(issues.length){ib.style.display='';ib.innerHTML='üí° <strong>Am√©liorations :</strong><br>'+issues.map(i=>'‚Ä¢ '+i).join('<br>');}else{ib.style.display='none';}
  document.getElementById('passCheckResult').classList.add('visible');
}
document.getElementById('passCheckInput').addEventListener('keydown',e=>{if(e.key==='Enter')checkPassword();});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// 3. PASSWORD GENERATOR
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const CHARS = {
  upper:'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
  lower:'abcdefghijklmnopqrstuvwxyz',
  num:  '0123456789',
  sym:  '!@#$%^&*()-_=+[]{}|;:,.<>?'
};

function updateLen() {
  document.getElementById('lenVal').textContent=document.getElementById('lenSlider').value;
}
function toggleOpt(btn){btn.classList.toggle('on');}

function generatePass() {
  const len=parseInt(document.getElementById('lenSlider').value);
  const useUpper=document.getElementById('togUpper').classList.contains('on');
  const useLower=document.getElementById('togLower').classList.contains('on');
  const useNum  =document.getElementById('togNum').classList.contains('on');
  const useSym  =document.getElementById('togSym').classList.contains('on');
  let pool='';
  if(useUpper)pool+=CHARS.upper;
  if(useLower)pool+=CHARS.lower;
  if(useNum)  pool+=CHARS.num;
  if(useSym)  pool+=CHARS.sym;
  if(!pool){alert('S√©lectionnez au moins un type de caract√®re.');return;}
  const arr=new Uint32Array(len);
  crypto.getRandomValues(arr);
  let pass=Array.from(arr).map(v=>pool[v%pool.length]).join('');
  // Guarantee at least one of each selected type
  const types=[];
  if(useUpper)types.push(CHARS.upper);
  if(useLower)types.push(CHARS.lower);
  if(useNum)  types.push(CHARS.num);
  if(useSym)  types.push(CHARS.sym);
  const arr2=new Uint32Array(types.length);
  crypto.getRandomValues(arr2);
  let passArr=pass.split('');
  types.forEach((t,i)=>{ passArr[i]=t[arr2[i]%t.length]; });
  passArr.sort(()=>Math.random()-0.5);
  pass=passArr.join('');
  document.getElementById('passText').textContent=pass;
  document.getElementById('copyBtn').textContent='Copier';
  document.getElementById('copyBtn').classList.remove('copied');
  updateStrength(pass);
}

function updateStrength(pass) {
  let s=0;
  if(pass.length>=8)s++;if(pass.length>=12)s++;if(pass.length>=16)s++;
  if(/[A-Z]/.test(pass)&&/[a-z]/.test(pass))s++;
  if(/[0-9]/.test(pass)&&/[^A-Za-z0-9]/.test(pass))s++;
  const segs=document.querySelectorAll('.strength-seg');
  const colors=['#ff3e6c','#ff6b35','#ffb800','#7dc900','#00e98a'];
  const labels=['Tr√®s faible','Faible','Moyen','Fort','Tr√®s fort'];
  segs.forEach((seg,i)=>{seg.style.background=i<s?colors[Math.min(s-1,4)]:'var(--border)';});
  document.getElementById('strengthText').textContent=s>0?labels[Math.min(s-1,4)]:'‚Äî';
  document.getElementById('strengthText').style.color=s>0?colors[Math.min(s-1,4)]:'var(--muted)';
}

function copyPass() {
  const p=document.getElementById('passText').textContent;
  if(p==='Cliquez sur G√©n√©rer')return;
  navigator.clipboard.writeText(p).then(()=>{
    const btn=document.getElementById('copyBtn');
    btn.textContent='‚úì Copi√© !';btn.classList.add('copied');
    setTimeout(()=>{btn.textContent='Copier';btn.classList.remove('copied');},2000);
  });
}

// Auto-generate on page load
generatePass();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// 4. EMAIL CHECKER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const TEMP_EMAIL_DOMAINS = ['mailinator.com','guerrillamail.com','temp-mail.org','throwam.com','yopmail.com','sharklasers.com','guerrillamailblock.com','grr.la','guerrillamail.info','spam4.me','10minutemail.com','trashmail.com','dispostable.com','fakeinbox.com'];
const KNOWN_PROVIDERS = ['gmail.com','outlook.com','hotmail.com','yahoo.com','icloud.com','protonmail.com','laposte.net','orange.fr','sfr.fr','free.fr','live.com','msn.com'];

async function analyzeEmail() {
  const raw=document.getElementById('emailInput').value.trim().toLowerCase();
  const err=document.getElementById('emailError');
  err.classList.remove('visible');
  document.getElementById('emailResult').classList.remove('visible');
  if(!raw){showErr(err,'Entrez une adresse email.');return;}

  showLoading('emailLoading',true);
  await sleep(900+Math.random()*500);
  showLoading('emailLoading',false);

  const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if(!emailRegex.test(raw)){showErr(err,'Format d\'email invalide.');return;}

  const [local,domain]=raw.split('@');
  const tld='.'+domain.split('.').slice(-1)[0];
  const isTemp=TEMP_EMAIL_DOMAINS.includes(domain);
  const isKnown=KNOWN_PROVIDERS.includes(domain);
  const hasDots=local.includes('..');
  const hasSpecial=/[!#$%^&*()=\[\]{}|<>]/.test(local);
  const isLong=local.length>30||domain.length>40;
  const hasNumbers=/^\d+$/.test(local);
  const isDisposable=TEMP_EMAIL_DOMAINS.some(d=>domain.includes(d.split('.')[0]));

  let score=100,issues=[],tags=[];
  if(isTemp||isDisposable){score-=60;issues.push('Email jetable / temporaire d√©tect√©.');tags.push({t:'TEMPORAIRE',c:'bad'});}
  if(isKnown){score+=10;tags.push({t:'Fournisseur connu',c:'ok'});}
  if(hasDots){score-=15;issues.push('Double point dans l\'adresse locale.');tags.push({t:'FORMAT SUSPECT',c:'bad'});}
  if(hasSpecial){score-=20;issues.push('Caract√®res sp√©ciaux inhabituels.');tags.push({t:'CHARS SP√âCIAUX',c:'mid'});}
  if(isLong){score-=10;issues.push('Adresse anormalement longue.');tags.push({t:'LONG',c:'mid'});}
  if(BAD_TLDS.includes(tld)){score-=20;issues.push('Extension de domaine suspecte.');tags.push({t:tld.toUpperCase(),c:'bad'});}
  if(!isKnown&&!isTemp){tags.push({t:'DOMAINE PERSO',c:'mid'});}
  score=Math.max(0,Math.min(100,score));

  let level,title,icon,desc;
  if(score>=70){level='safe';title='Email L√©gitime';icon='‚úÖ';desc='Cette adresse semble valide et provient d\'un fournisseur reconnu.';}
  else if(score>=40){level='warn';title='Email Suspect';icon='‚ö†Ô∏è';desc='Certains indicateurs sont inhabituels. V√©rifiez l\'exp√©diteur.';}
  else{level='danger';title='Email Dangereux !';icon='üö®';desc='Email jetable ou tr√®s suspect. Ne cliquez pas sur les liens qu\'il contient !';}

  const c=document.getElementById('emailResultCard');
  c.className='result-card '+level;
  document.getElementById('emailIcon').textContent=icon;
  document.getElementById('emailTitle').textContent=title;
  document.getElementById('emailSub').textContent=raw;
  document.getElementById('emailDesc').textContent=desc;

  document.getElementById('emailDetail').innerHTML=`
    <div class="detail-row"><span class="detail-key">Adresse locale</span><span class="detail-val">${local}</span></div>
    <div class="detail-row"><span class="detail-key">Domaine</span><span class="detail-val">${domain}</span></div>
    <div class="detail-row"><span class="detail-key">Extension</span><span class="detail-val">${tld}</span></div>
    <div class="detail-row"><span class="detail-key">Fournisseur</span><span class="detail-val">${isKnown?'<span class="tag ok">RECONNU</span>':isTemp?'<span class="tag bad">TEMPORAIRE</span>':'<span class="tag mid">INCONNU</span>'}</span></div>
    <div class="detail-row"><span class="detail-key">Score s√©curit√©</span><span class="detail-val" style="color:${level==='safe'?'var(--safe)':level==='warn'?'var(--warn)':'var(--danger)'};font-weight:700">${score}/100</span></div>
    <div class="detail-row"><span class="detail-key">√âtiquettes</span><span class="detail-val">${tags.map(t=>`<span class="tag ${t.c}">${t.t}</span>`).join('')}</span></div>
  `;

  const ib=document.getElementById('emailIssues');
  if(issues.length){ib.style.display='';ib.innerHTML='‚ö†Ô∏è <strong>Points d\'attention :</strong><br>'+issues.map(i=>'‚Ä¢ '+i).join('<br>');}else{ib.style.display='none';}
  document.getElementById('emailResult').classList.add('visible');
}
document.getElementById('emailInput').addEventListener('keydown',e=>{if(e.key==='Enter')analyzeEmail();});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// 5. QR CODE (uses jsQR lib via CDN)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// Load jsQR
const jsQRScript=document.createElement('script');
jsQRScript.src='https://cdnjs.cloudflare.com/ajax/libs/jsQR/1.4.0/jsQR.min.js';
document.head.appendChild(jsQRScript);

function handleQR(input) {
  const file=input.files[0];
  if(!file)return;
  const reader=new FileReader();
  reader.onload=function(e){
    const img=document.getElementById('qrImg');
    img.src=e.target.result;
    document.getElementById('qrPreview').classList.add('visible');
    decodeQR(e.target.result);
  };
  reader.readAsDataURL(file);
}

function decodeQR(src) {
  const imgEl=new Image();
  imgEl.onload=function(){
    const canvas=document.createElement('canvas');
    canvas.width=imgEl.width; canvas.height=imgEl.height;
    const ctx=canvas.getContext('2d');
    ctx.drawImage(imgEl,0,0);
    const imageData=ctx.getImageData(0,0,canvas.width,canvas.height);
    if(typeof jsQR === 'undefined'){
      setTimeout(()=>decodeQR(src),500); return;
    }
    const code=jsQR(imageData.data,imageData.width,imageData.height);
    if(!code){
      showQRResult('warn','QR illisible','‚ö†Ô∏è','Impossible de d√©coder ce QR code. Essayez une image plus nette.','',',[]);
      return;
    }
    const url=code.data;
    showQRResult('info','QR D√©cod√©','üì∑','Contenu extrait. Analyse du lien en cours...', url,[]);
    // Now analyze the URL
    setTimeout(()=>{
      document.getElementById('linkInput').value=url;
      showSection('tools',document.querySelector('.nav-btn'));
      switchTab('link',document.querySelector('.tab-btn'));
      analyzeLink();
    },1500);
  };
  imgEl.src=src;
}

function showQRResult(level,title,icon,desc,sub,checks){
  const c=document.getElementById('qrResultCard');
  c.className='result-card '+level;
  document.getElementById('qrIcon').textContent=icon;
  document.getElementById('qrTitle').textContent=title;
  document.getElementById('qrSub').textContent=sub;
  document.getElementById('qrDesc').textContent=desc;
  document.getElementById('qrChecks').innerHTML=checks.map(ch=>`<div class="check-item"><div class="check-dot ${ch.s}"></div><span class="check-label">${ch.l}</span><span class="check-value ${ch.s}">${ch.v}</span></div>`).join('');
  document.getElementById('qrResult').classList.add('visible');
}

// QR Drop
const qrDrop=document.getElementById('qrDrop');
qrDrop.addEventListener('dragover',e=>{e.preventDefault();qrDrop.classList.add('drag-over');});
qrDrop.addEventListener('dragleave',()=>qrDrop.classList.remove('drag-over'));
qrDrop.addEventListener('drop',e=>{
  e.preventDefault();qrDrop.classList.remove('drag-over');
  const file=e.dataTransfer.files[0];
  if(file&&file.type.startsWith('image/')){
    const dt=new DataTransfer();dt.items.add(file);
    document.getElementById('qrFileInput').files=dt.files;
    handleQR({files:[file]});
  }
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showLoading(id,show){
  const el=document.getElementById(id);
  if(show)el.classList.add('visible');else el.classList.remove('visible');
}
function showErr(el,msg){el.textContent='‚ö† '+msg;el.classList.add('visible');}
function sleep(ms){return new Promise(r=>setTimeout(r,ms));}
</script>
</body>
</html>
